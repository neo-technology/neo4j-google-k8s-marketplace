+ KUBE_CONFIG=/home/edrandall/.kube/config
+ GCLOUD_CONFIG=/home/edrandall/.config/gcloud
+ EXTRA_DOCKER_PARAMS=
+ DOCKER_NETWORK=host
+ MARKETPLACE_TOOLS_TAG=latest
+ MARKETPLACE_TOOLS_IMAGE=gcr.io/cloud-marketplace-tools/k8s/dev
++ date +%Y%m%d-%H%M%S
+ VERIFICATION_LOGS_PATH=/home/edrandall/.mpdev_logs/20220908-111220
+ kube_mount=
+ [[ -f /home/edrandall/.kube/config ]]
+ kube_mount=(--mount "type=bind,source=${KUBE_CONFIG},target=/mount/config/.kube/config,readonly")
+ gcloud_mount=
+ gcloud_original_path=
+ [[ -e /home/edrandall/.config/gcloud ]]
+ gcloud_mount=(--mount "type=bind,source=${GCLOUD_CONFIG},target=/mount/config/.config/gcloud,readonly")
++ readlink -f /home/edrandall/.config/gcloud
+ canonical_gcloud_config=/home/edrandall/.config/gcloud
+ gcloud_original_path=(--env "GCLOUD_ORIGINAL_PATH=${canonical_gcloud_config}")
+ terminal_docker_param=-t
+ [[ -t 0 ]]
+ terminal_docker_param=-it
+ mkdir -p /home/edrandall/.mpdev_logs/20220908-111220
+ echo 'Logs stored in /home/edrandall/.mpdev_logs/20220908-111220'
+ tee /home/edrandall/.mpdev_logs/20220908-111220/verify.log
Logs stored in /home/edrandall/.mpdev_logs/20220908-111220
+ tee /home/edrandall/.mpdev_logs/20220908-111220/verify.log
+ docker run --init --mount type=bind,source=/var/run/docker.sock,target=/var/run/docker.sock,readonly --mount type=bind,source=/home/edrandall/.mpdev_logs/20220908-111220,target=/logs --net=host --mount type=bind,source=/home/edrandall/.kube/config,target=/mount/config/.kube/config,readonly --mount type=bind,source=/home/edrandall/.config/gcloud,target=/mount/config/.config/gcloud,readonly --env GCLOUD_ORIGINAL_PATH=/home/edrandall/.config/gcloud -it --rm gcr.io/cloud-marketplace-tools/k8s/dev:latest verify --deployer=gcr.io/neo4j-k8s-marketplace-public/causal-cluster/deployer:4.4

INFO Parameters: {
  "name": "apptest-k9k9ve4e",
  "namespace": "apptest-k9k9ve4e"
}
INFO Creates namespace "apptest-k9k9ve4e"
Using /opt/kubectl/1.22/kubectl (server=1.22)
namespace/apptest-k9k9ve4e created
INFO Initializes the deployer container which will deploy all the application components
INFO: /data/schema.yaml:
application_api_version: v1beta1
properties:
  name:
    type: string
    x-google-marketplace:
      type: NAME
  namespace:
    type: string
    x-google-marketplace:
      type: NAMESPACE
  image:
    type: string
    default: gcr.io/neo4j-k8s-marketplace-public/causal-cluster:4.4
    x-google-marketplace:
      type: IMAGE
  coreServers:
    title: Core servers to use
    type: integer
    default: 3
    minimum: 1
    maximum: 9
  readReplicaServers:
    title: Read Replicas
    type: integer
    default: 0
    minimum: 0
    maximum: 9
  authEnabled:
    title: Enable Authorization
    type: string
    default: "true"
    enum:
    - "true"
    - "false"
  cpuRequest:
    title: CPU units per node
    type: string
    default: "100m"
  memoryRequest:
    title: Memory per node
    type: string
    default: "512M"
  cpuLimit:
    title: CPU units per node (limit)
    type: string
    default: "8"
  memoryLimit:
    title: Memory per node (limit)
    type: string
    default: "512G"
  volumeSize:
    title: Disk allocation to core nodes
    type: string
    default: "10Gi"
  volumeStorageClass:
    title: Storage class for nodes, SSD storage recommended.
    type: string
    default: standard
    x-google-marketplace:
      type: STORAGE_CLASS
      storageClass:
        type: SSD
  # ubbAgentImage:
  #   type: string
  #   default: gcr.io/neo4j-k8s-marketplace-public/causal-cluster/ubbagent:4.4
  #   x-google-marketplace:
  #     type: IMAGE
  # reportingSecret:
  #   type: string
  #   default: "XYZ"
  #   x-google-marketplace:
  #     type: REPORTING_SECRET
required:
- name
- namespace
- image
- coreServers
- readReplicaServers
- volumeStorageClass
Using /opt/kubectl/1.22/kubectl (server=1.22)
Using /opt/kubectl/1.22/kubectl (server=1.22)
error: unable to recognize "STDIN": no matches for kind "Application" in version "app.k8s.io/v1beta1"
ERROR Failed to start deployer
INFO cleaning all resources.
INFO Collecting events for namespace "apptest-k9k9ve4e"
Using /opt/kubectl/1.22/kubectl (server=1.22)
No resources found in apptest-k9k9ve4e namespace.
Using /opt/kubectl/1.22/kubectl (server=1.22)
No resources found in apptest-k9k9ve4e namespace.
Using /opt/kubectl/1.22/kubectl (server=1.22)
Using /opt/kubectl/1.22/kubectl (server=1.22)
INFO Deleting APIServices  v1beta1.metrics.k8s.io
Using /opt/kubectl/1.22/kubectl (server=1.22)
apiservice.apiregistration.k8s.io "v1beta1.metrics.k8s.io" deleted
INFO Deleting namespace "apptest-k9k9ve4e"
Using /opt/kubectl/1.22/kubectl (server=1.22)
apiVersion: v1
items: []
kind: List
metadata:
  resourceVersion: ""
  selfLink: ""
Using /opt/kubectl/1.22/kubectl (server=1.22)
namespace "apptest-k9k9ve4e" deleted
=== ERROR SUMMARY ===
ERROR Failed to start deployer
=====================

=== VERIFICATION STATUS ===
FAILED
===========================
